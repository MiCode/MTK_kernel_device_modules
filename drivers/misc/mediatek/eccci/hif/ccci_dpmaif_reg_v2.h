/* SPDX-License-Identifier: GPL-2.0 */
/*
 * Copyright (C) 2016 MediaTek Inc.
 */

#ifndef __CCCI_DPMAIF_REG_V2_H__
#define __CCCI_DPMAIF_REG_V2_H__

#include <linux/io.h>

#include "ccci_dpmaif_reg_com.h"


/*Default DPMAIF DL common setting*/
#define DPMAIF_HW_CHK_BAT_NUM      62
#define DPMAIF_HW_CHK_FRG_NUM      DPMAIF_HW_CHK_BAT_NUM
#define DPMAIF_HW_CHK_PIT_NUM      (DPMAIF_HW_CHK_BAT_NUM*2)


#define DPMAIF_DL_BAT_ENTRY_SIZE  8192 /* <- 1024 <- 128 */

/* 2048*/ /* 256, 100pkts*2*10ms=2000*12B=>24k */
#define DPMAIF_DL_PIT_ENTRY_SIZE  (DPMAIF_DL_BAT_ENTRY_SIZE * 2)
#define DPMAIF_DL_PIT_BYTE_SIZE   16


/***********************************************************************
 *
 *  dpmaif_ul_ao
 *
 ***********************************************************************/
#define NRL2_DPMAIF_AO_UL_CH0_STA                 (BASE_DPMAIF_AO_UL + 0x0)
#define NRL2_DPMAIF_AO_UL_CH1_STA                 (BASE_DPMAIF_AO_UL + 0x4)
#define NRL2_DPMAIF_AO_UL_CH2_STA                 (BASE_DPMAIF_AO_UL + 0x8)
#define NRL2_DPMAIF_AO_UL_CH3_STA                 (BASE_DPMAIF_AO_UL + 0xC)
#define NRL2_DPMAIF_AO_UL_CH4_STA                 (BASE_DPMAIF_AO_UL + 0x10)
#define NRL2_DPMAIF_AO_UL_MD_RDY_CNT_TH           (BASE_DPMAIF_AO_UL + 0x18)

#define NRL2_DPMAIF_AO_UL_CHNL0_CON0              (BASE_DPMAIF_AO_UL + 0x20)
#define NRL2_DPMAIF_AO_UL_CHNL0_CON1              (BASE_DPMAIF_AO_UL + 0x24)
#define NRL2_DPMAIF_AO_UL_CHNL0_CON2              (BASE_DPMAIF_AO_UL + 0x28)

#define NRL2_DPMAIF_AO_UL_CHNL1_CON0              (BASE_DPMAIF_AO_UL + 0x30)
#define NRL2_DPMAIF_AO_UL_CHNL1_CON1              (BASE_DPMAIF_AO_UL + 0x34)
#define NRL2_DPMAIF_AO_UL_CHNL1_CON2              (BASE_DPMAIF_AO_UL + 0x38)
#define NRL2_DPMAIF_AO_UL_CHNL1_STA0              (BASE_DPMAIF_AO_UL + 0x64)
#define NRL2_DPMAIF_AO_UL_CHNL2_CON0              (BASE_DPMAIF_AO_UL + 0x40)
#define NRL2_DPMAIF_AO_UL_CHNL2_CON1              (BASE_DPMAIF_AO_UL + 0x44)
#define NRL2_DPMAIF_AO_UL_CHNL2_CON2              (BASE_DPMAIF_AO_UL + 0x48)
#define NRL2_DPMAIF_AO_UL_CHNL2_STA0              (BASE_DPMAIF_AO_UL + 0x68)
#define NRL2_DPMAIF_AO_UL_CHNL3_CON0              (BASE_DPMAIF_AO_UL + 0x50)
#define NRL2_DPMAIF_AO_UL_CHNL3_CON1              (BASE_DPMAIF_AO_UL + 0x54)
#define NRL2_DPMAIF_AO_UL_CHNL3_CON2              (BASE_DPMAIF_AO_UL + 0x58)
#define NRL2_DPMAIF_AO_UL_CHNL3_STA0              (BASE_DPMAIF_AO_UL + 0x6C)
#define NRL2_DPMAIF_AO_UL_CH_WIDX01               (BASE_DPMAIF_AO_UL + 0xC0)
#define NRL2_DPMAIF_AO_UL_CH_WIDX23               (BASE_DPMAIF_AO_UL + 0xC4)
#define NRL2_DPMAIF_AO_ULQN_MAX_PKT_SZ            (BASE_DPMAIF_AO_UL + 0xC8)
#define NRL2_DPMAIF_AO_UL_CHNL4_CON0              (BASE_DPMAIF_AO_UL + 0xD0)
#define NRL2_DPMAIF_AO_UL_CHNL4_CON1              (BASE_DPMAIF_AO_UL + 0xD4)
#define NRL2_DPMAIF_AO_UL_CHNL4_CON2              (BASE_DPMAIF_AO_UL + 0xD8)
#define NRL2_DPMAIF_AO_UL_CHNL4_STA0              (BASE_DPMAIF_AO_UL + 0xDC)
#define NRL2_DPMAIF_AO_UL_CH_WIDX4                (BASE_DPMAIF_AO_UL + 0xE4)
#define NRL2_DPMAIF_AO_UL_CH_WEIGHT0              (BASE_DPMAIF_AO_UL + 0xE8)
#define NRL2_DPMAIF_AO_UL_CH_WEIGHT1              (BASE_DPMAIF_AO_UL + 0xEC)


/***********************************************************************
 *
 *  dpmaif_ao_dl
 *
 ***********************************************************************/


#define NRL2_DPMAIF_AO_DL_PKTINFO_CON0            (BASE_DPMAIF_AO_DL + 0x00)
#define NRL2_DPMAIF_AO_DL_PKTINFO_CON1            (BASE_DPMAIF_AO_DL + 0x04)
#define NRL2_DPMAIF_AO_DL_PKTINFO_CON2            (BASE_DPMAIF_AO_DL + 0x08)


#define NRL2_DPMAIF_AO_DL_BAT_STA0                (BASE_DPMAIF_AO_DL + 0x10)
#define NRL2_DPMAIF_AO_DL_BAT_STA1                (BASE_DPMAIF_AO_DL + 0x14)
#define NRL2_DPMAIF_AO_DL_BAT_STA2                (BASE_DPMAIF_AO_DL + 0x18)
#define NRL2_DPMAIF_AO_DL_PIT_STA5                (BASE_DPMAIF_AO_DL + 0x1C)

#define NRL2_DPMAIF_AO_DL_PIT_STA0                (BASE_DPMAIF_AO_DL + 0x20)
#define NRL2_DPMAIF_AO_DL_PIT_STA1                (BASE_DPMAIF_AO_DL + 0x24)
#define NRL2_DPMAIF_AO_DL_PIT_STA2                (BASE_DPMAIF_AO_DL + 0x28)
#define NRL2_DPMAIF_AO_DL_PIT_STA3                (BASE_DPMAIF_AO_DL + 0x2C)
#define NRL2_DPMAIF_AO_DL_RDY_CHK_FRG_THRES       (BASE_DPMAIF_AO_DL + 0x30)
#define NRL2_DPMAIF_AO_DL_REORDER_BITMAP_CACHE    (BASE_DPMAIF_AO_DL + 0x38)
#define NRL2_DPMAIF_AO_DL_REORDER_CACHE           (BASE_DPMAIF_AO_DL + 0x3C)
#define NRL2_DPMAIF_AO_DL_FRGBAT_STA0             (BASE_DPMAIF_AO_DL + 0x40)
#define NRL2_DPMAIF_AO_DL_FRGBAT_STA1             (BASE_DPMAIF_AO_DL + 0x44)
#define NRL2_DPMAIF_AO_DL_FRGBAT_STA2             (BASE_DPMAIF_AO_DL + 0x48)
#define NRL2_DPMAIF_AO_DL_BAT_STA3                (BASE_DPMAIF_AO_DL + 0x50)
#define NRL2_DPMAIF_AO_DL_PIT_STA4                (BASE_DPMAIF_AO_DL + 0x54)
#define NRL2_DPMAIF_AO_DL_FRGBAT_STA3             (BASE_DPMAIF_AO_DL + 0x58)
#define NRL2_DPMAIF_AO_DL_REORDER_THRES           (BASE_DPMAIF_AO_DL + 0x80)


/*DPMAIF AO UL CONFIG: 0x10014000 / ao + 0*/
#define DPMAIF_AO_UL_CHNL0_STA            NRL2_DPMAIF_AO_UL_CH0_STA
#define DPMAIF_AO_UL_CHNL1_STA            NRL2_DPMAIF_AO_UL_CH1_STA
#define DPMAIF_AO_UL_CHNL2_STA            NRL2_DPMAIF_AO_UL_CH2_STA
#define DPMAIF_AO_UL_CHNL3_STA            NRL2_DPMAIF_AO_UL_CH3_STA
#define DPMAIF_AO_UL_CH_WEIGHT1           NRL2_DPMAIF_AO_UL_CH_WEIGHT1
/*DPMAIF AO DL CONFIG: 0x10014400 / ao + 0x400*/
#define DPMAIF_AO_DL_PKTINFO_CONO         NRL2_DPMAIF_AO_DL_PKTINFO_CON0
#define DPMAIF_AO_DL_PKTINFO_CON1         NRL2_DPMAIF_AO_DL_PKTINFO_CON1
#define DPMAIF_AO_DL_PKTINFO_CON2         NRL2_DPMAIF_AO_DL_PKTINFO_CON2



#define DPMAIF_AO_DL_BAT_STA0             NRL2_DPMAIF_AO_DL_BAT_STA0
#define DPMAIF_AO_DL_BAT_STA1             NRL2_DPMAIF_AO_DL_BAT_STA1
#define DPMAIF_AO_DL_BAT_STA2             NRL2_DPMAIF_AO_DL_BAT_STA2

#define DPMAIF_AO_DL_PIT_STA0             NRL2_DPMAIF_AO_DL_PIT_STA0
#define DPMAIF_AO_DL_PIT_STA1             NRL2_DPMAIF_AO_DL_PIT_STA1
#define DPMAIF_AO_DL_PIT_STA2             NRL2_DPMAIF_AO_DL_PIT_STA2
#define DPMAIF_AO_DL_PIT_STA3             NRL2_DPMAIF_AO_DL_PIT_STA3

#define DPMAIF_AO_DL_RDY_CHK_FRG_THRES    NRL2_DPMAIF_AO_DL_RDY_CHK_FRG_THRES
#define DPMAIF_AO_DL_FRGBAT_STA2          NRL2_DPMAIF_AO_DL_FRGBAT_STA2
#define DPMAIF_AO_DL_REORDER_THRES        NRL2_DPMAIF_AO_DL_REORDER_THRES

/*DPMAIF PD UL CONFIG: 0x1022D000 /pd+0*/
#define DPMAIF_PD_UL_ADD_DESC             NRL2_DPMAIF_UL_ADD_DESC
#define DPMAIF_PD_UL_RESTORE_RIDX         NRL2_DPMAIF_UL_RESTORE_RIDX

#define DPMAIF_PD_UL_MD_RDY_CNT_TH        NRL2_DPMAIF_AO_UL_MD_RDY_CNT_TH
#define DPMAIF_PD_UL_CHNL_ARB0            NRL2_DPMAIF_AO_UL_CHNL_ARB0
#define DPMAIF_PD_UL_CHNL_ARB1            NRL2_DPMAIF_UL_CHNL_ARB1

#define DPMAIF_PD_UL_CHNL0_CON0           NRL2_DPMAIF_AO_UL_CHNL0_CON0
#define DPMAIF_PD_UL_CHNL0_CON1           NRL2_DPMAIF_AO_UL_CHNL0_CON1
#define DPMAIF_PD_UL_CHNL0_STA0           NRL2_DPMAIF_AO_UL_CHNL0_STA0

#define DPMAIF_PD_UL_CHNL1_CON0           NRL2_DPMAIF_AO_UL_CHNL1_CON0
#define DPMAIF_PD_UL_CHNL1_CON1           NRL2_DPMAIF_AO_UL_CHNL1_CON1
#define DPMAIF_PD_UL_CHNL1_STA0           NRL2_DPMAIF_AO_UL_CHNL1_STA0

#define DPMAIF_PD_UL_CHNL2_CON0           NRL2_DPMAIF_AO_UL_CHNL2_CON0
#define DPMAIF_PD_UL_CHNL2_CON1           NRL2_DPMAIF_AO_UL_CHNL2_CON1
#define DPMAIF_PD_UL_CHNL2_STA0           NRL2_DPMAIF_AO_UL_CHNL2_STA0

#define DPMAIF_PD_UL_CHNL3_CON0           NRL2_DPMAIF_AO_UL_CHNL3_CON0
#define DPMAIF_PD_UL_CHNL3_CON1           NRL2_DPMAIF_AO_UL_CHNL3_CON1
#define DPMAIF_PD_UL_CHNL3_STA0           NRL2_DPMAIF_AO_UL_CHNL3_STA0

#define DPMAIF_PD_UL_CACHE_CON0           NRL2_DPMAIF_UL_CACHE_CON0

#define DPMAIF_PD_UL_ADD_DESC_CH          NRL2_DPMAIF_UL_ADD_DESC_CH0
#define DPMAIF_PD_UL_ADD_DESC_CH4         NRL2_DPMAIF_UL_ADD_DESC_CH4

#define DPMAIF_PD_UL_DBG_STA0             NRL2_DPMAIF_UL_DBG_STA0
#define DPMAIF_PD_UL_DBG_STA1             NRL2_DPMAIF_UL_DBG_STA1
#define DPMAIF_PD_UL_DBG_STA2             NRL2_DPMAIF_UL_DBG_STA2
#define DPMAIF_PD_UL_DBG_STA3             NRL2_DPMAIF_UL_DBG_STA3
#define DPMAIF_PD_UL_DBG_STA4             NRL2_DPMAIF_UL_DBG_STA4
#define DPMAIF_PD_UL_DBG_STA5             NRL2_DPMAIF_UL_DBG_STA5
#define DPMAIF_PD_UL_DBG_STA6             NRL2_DPMAIF_UL_DBG_STA6
#define DPMAIF_PD_UL_DBG_STA7             NRL2_DPMAIF_UL_DBG_STA7
#define DPMAIF_PD_UL_DBG_STA8             NRL2_DPMAIF_UL_DBG_STA8
#define DPMAIF_PD_UL_DBG_STA9             NRL2_DPMAIF_UL_DBG_STA9

/*DPMAIF PD DL CONFIG: 0x1022D100 /pd+0x100*/

#define DPMAIF_PD_DL_PIT_ADD              NRL2_DPMAIF_DL_PIT_ADD


#define DPMAIF_PD_DL_MISC_CON0            NRL2_DPMAIF_DL_MISC_CON0

#define DPMAIF_PD_DL_STA0                 NRL2_DPMAIF_DL_STA0
#define DPMAIF_PD_DL_STA8                 NRL2_DPMAIF_DL_STA8

#define DPMAIF_PD_DL_DBG_STA0             NRL2_DPMAIF_DL_DBG_STA0
#define DPMAIF_PD_DL_DBG_STA1             NRL2_DPMAIF_DL_DBG_STA1
#define DPMAIF_PD_DL_DBG_STA7             NRL2_DPMAIF_DL_DBG_STA7

#define DPMAIF_PD_DL_DBG_STA14            NRL2_DPMAIF_DL_DBG_STA14

/*DPMAIF PD AP MSIC CONFIG: 0x1022D400 /pd+0x400*/

#define DPMAIF_PD_AP_L1TISAR0             NRL2_DPMAIF_AP_MISC_AP_L1TISAR0
#define DPMAIF_PD_AP_L1TIMR0              NRL2_DPMAIF_AP_MISC_AP_L1TIMR0

#define DPMAIF_PD_BUS_CONFIG0             NRL2_DPMAIF_AP_MISC_BUS_CONFIG0
#define DPMAIF_PD_TOP_AP_CFG              NRL2_DPMAIF_AP_MISC_TOP_AP_CFG
#define DPMAIF_PD_BUS_STATUS0             NRL2_DPMAIF_AP_MISC_EMI_BUS_STATUS0
#define DPMAIF_PD_AP_DMA_ERR_STA          NRL2_DPMAIF_AP_MISC_AP_DMA_ERR_STA


#define DPMAIF_AP_MISC_APB_DBG_SRAM       NRL2_DPMAIF_AP_MISC_APB_DBG_SRAM

#define DPMAIF_PD_AP_CG_EN                NRL2_DPMAIF_AP_MISC_CG_EN
#define DPMAIF_PD_AP_CODA_VER             NRL2_DPMAIF_AP_MISC_CODA_VER

#define DPMAIF_MISC_AO_CFG0               NRL2_DPMAIF_MISC_AO_CFG0
#define DPMAIF_AXI_MAS_SECURE             NRL2_DPMAIF_AXI_MAS_SECURE

/*DPMAIF PD MD MISC CONFIG: 0x1022C000 */
#define DPMAIF_PD_MD_IP_BUSY              NRL2_DPMAIF_PD_MD_IP_BUSY
#define DPMAIF_PD_MD_IP_BUSY_MASK         NRL2_DPMAIF_PD_MD_IP_BUSY_MASK


/*assistant macros*/
#define CLDMA_AP_TQSAR(i)  (CLDMA_AP_UL_START_ADDR_0   + (4 * (i)))
#define CLDMA_AP_TQCPR(i)  (CLDMA_AP_UL_CURRENT_ADDR_0 + (4 * (i)))
#define CLDMA_AP_RQSAR(i)  (CLDMA_AP_SO_START_ADDR_0   + (4 * (i)))
#define CLDMA_AP_RQCPR(i)  (CLDMA_AP_SO_CURRENT_ADDR_0 + (4 * (i)))
#define CLDMA_AP_TQSABAK(i)  (CLDMA_AP_UL_START_ADDR_BK_0 + (4 * (i)))
#define CLDMA_AP_TQCPBAK(i)  (CLDMA_AP_UL_CURRENT_ADDR_BK_0 + (4 * (i)))


#define DPMAIF_MD_DUMMYPIT_EN     (1 << 31)


/* ======== UL ========= */

/* DPMAIF_PD_UL_CHNL(*)_CON1 */

#define DPMAIF_ULQSAR_n(q_num)      \
	((DPMAIF_PD_UL_CHNL0_CON0) + (0x10 * (q_num)))
#define DPMAIF_UL_DRBSIZE_ADDRH_n(q_num)    \
	((DPMAIF_PD_UL_CHNL0_CON1) + (0x10 * (q_num)))



#define DPMAIF_ULQ_STA0_n(q_num)     \
	((NRL2_DPMAIF_AO_UL_CH0_STA) + (0x04 * (q_num)))

/*DPMAIF_PD_DL_DBG_STA1*/
#define DPMAIF_DL_IDLE_STS             (1 << 25)

/*DPMAIF_PD_UL_DBG_STA2*/
#define DPMAIF_UL_STS_CUR_SHIFT        (26)
#define DPMAIF_UL_IDLE_STS_MSK         (0x3F)
#define DPMAIF_UL_IDLE_STS             (0x01)

/* === tx interrupt mask === */
#define UL_INT_EMPTY_OFFSET         5
#define UL_INT_MD_NOTRDY_OFFSET     10
#define UL_INT_PWR_NOTRDY_OFFSET    15
#define UL_INT_LEN_ERR_OFFSET       20

#define DPMAIF_UL_INT_DONE(q_num)            (1 << (q_num+UL_INT_DONE_OFFSET))
#define DPMAIF_UL_INT_EMPTY(q_num)           (1 << (q_num+UL_INT_EMPTY_OFFSET))
#define DPMAIF_UL_INT_MD_NOTRDY(q_num)       (1 << (q_num+UL_INT_MD_NOTRDY_OFFSET))
#define DPMAIF_UL_INT_PWR_NOTRDY(q_num)      (1 << (q_num+UL_INT_PWR_NOTRDY_OFFSET))
#define DPMAIF_UL_INT_LEN_ERR(q_num)         (1 << (q_num+UL_INT_LEN_ERR_OFFSET))

#define DPMAIF_UL_INT_QDONE_MSK              (0x1F << UL_INT_DONE_OFFSET)
#define DPMAIF_UL_INT_EMPTY_MSK              (0x1F << UL_INT_EMPTY_OFFSET)
#define DPMAIF_UL_INT_MD_NOTREADY_MSK        (0x1F << UL_INT_MD_NOTRDY_OFFSET)
#define DPMAIF_UL_INT_MD_PWR_NOTREADY_MSK    (0x1F << UL_INT_PWR_NOTRDY_OFFSET)
#define DPMAIF_UL_INT_ERR_MSK                (0x1F << UL_INT_LEN_ERR_OFFSET)

#define AP_UL_L2INTR_ERR_En_Msk \
	(DPMAIF_UL_INT_ERR_MSK | DPMAIF_UL_INT_MD_NOTREADY_MSK | \
	DPMAIF_UL_INT_MD_PWR_NOTREADY_MSK)

/* DPMAIF_UL_INT_EMPTY_MSK | */
#define AP_UL_L2INTR_En_Msk    (AP_UL_L2INTR_ERR_En_Msk | DPMAIF_UL_INT_QDONE_MSK)


#define DPMAIF_PIT_SIZE_MSK            0xFFFF
#define DPMAIF_DL_PIT_WRIDX_MSK        0xFFFF

#define DPMAIF_DUMMY_PIT_MAX_NUM       0x3fffff
#define DPMAIF_DUMMY_PIT_AIDX          1024
#define DPMAIF_MD_DUMMYPIT_EN          (1 << 31)



#endif /* __CCCI_DPMAIF_REG_V2_H__ */
