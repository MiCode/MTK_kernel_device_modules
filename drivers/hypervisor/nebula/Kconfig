#
# Nebula
#

menu "Nebula"

config NEBULA
	tristate "Nebula"
	default n
	help
	  Nebula is a secure Operating System (OS) that provides a
	  Trusted Execution Environment (TEE) for Android.
	  Nebula is compatible with ARM and Intel processors.
	  Say N if unsure.

config NEBULA_CORE
	tristate "Nebula core driver"
	depends on NEBULA
	default n
	help
	  Nebula core driver provides the basic function for other
	  Nebula drivers.
	  Nebula is compatible with ARM and Intel processors.
	  Say N if unsure.

config NEBULA_VIRQ_SIMULATION
	tristate "Nebula Virq Simulation"
	default n
	help
	  This module adds support for simulations of communications based
	  on virq with Nebula Services.
	  It'll be called trusty-ipc, trusty-virtio.
	  Say N if unsure.

config NEBULA_LOG
	tristate
	depends on NEBULA_CORE
	default y
	help
	  It is designed to enable the logging subsystem for the Nebula
	  environment. It is responsible for capturing, managing, and
	  displaying log messages generated by various components within
	  the Nebula system.
	  Logging is a critical feature for monitoring system behavior,
	  diagnosing issues, and ensuring that developers can track the
	  internal operations of the system.

config NEBULA_VIRTIO
	tristate "Nebula virtio support"
	depends on NEBULA_CORE
	select VIRTIO
	default y
	help
	  It is responsible for enabling support for the Nebula virtio
	  framework within the system.
	  The Nebula virtio support ensures that the system can work
	  efficiently with virtualized I/O devices using the virtio protocol.

config NEBULA_VIRTIO_IPC
	tristate "Nebula Virtio IPC driver"
	depends on NEBULA_VIRTIO
	default y
	help
	  This module adds support for communications with Nebula Services.
	  It is a critical component for enabling efficient communication
	  channels between different processes, specifically tailored for
	  environments that leverage the Nebula and Virtio frameworks.
	  If you choose to build a module, it'll be called trusty-ipc.
	  Say N if unsure.

config NEBULA_IPC
	tristate "Nebula IPC Kernel API"
	depends on NEBULA_VIRTIO_IPC || NEBULA_VTEE_VIRTIO_IPC
	default n
	help
	  This module adds APIs for drivers to communicate with Nebula services.
	  It is responsible for enabling the Kernel API necessary for facilitating
	  inter-process communication (IPC) with Nebula services. When enabled, it
	  allows drivers within the kernel to interact and exchange information
	  with various Nebula services.

config NEBULA_IPC_DEV_MAJOR
	int "Nebula IPC character device major number"
	depends on NEBULA_VIRTIO_IPC
	default 0
	help
	  This number will be use as the major number in registering
	  chrdev if it's NOT 0. If it's 0, the major number would be
	  chosen dynamically. Pick an valid number if it conflicts
	  with other legacy drivers.

config NEBULA_LOG_DEV_MAJOR
	int "Nebula log character device major number"
	depends on NEBULA_LOG
	default 0
	help
	  This number will be use as the major number in registering
	  chrdev if it's NOT 0. If it's 0, the major number would be
	  chosen dynamically. Pick an valid number if it conflicts
	  with other legacy drivers.

config NEBULA_RPC_DEV_MAJOR
	int "Nebula rpc character device major number"
	depends on NEBULA_RPC
	default 0
	help
	  This number will be use as the major number in registering
	  chrdev if it's NOT 0. If it's 0, the major number would be
	  chosen dynamically. Pick an valid number if it conflicts
	  with other legacy drivers.

config NEBULA_RPC
	tristate "Nebula RPC"
	depends on NEBULA_IPC
	default n
	help
	  It activates the support for Nebula's Remote Procedure Call (RPC)
	  mechanism within the kernel. This feature is designed to enable
	  structured communication between different processes, by allowing
	  them to call functions or procedures in each other's address spaces
	  as if they were local.

config NEBULA_VTEE
	tristate "Nebula Virtual TEE support (SMC forwarding mode)"
	depends on NEBULA_CORE
	default n
	help
	  It is responsible for enabling support for the Nebula Virtual Trusted
	  Execution Environment (TEE) within the kernel.
	  Nebula virtual TEE driver is used for communicating with the Nebula TEE
	  OS if the Nebula Hypervisor is enabled.
	  Say N if unsure.

config NEBULA_VTEE_LOG
	tristate "Nebula Virtual TEE log driver"
	depends on NEBULA_VTEE
	default n
	help
	  It is responsible for enabling log support for the Nebula Virtual Trusted
	  Execution Environment (TEE) within the kernel.
	  Nebula virtual TEE log driver is used for collecting Nebula vTEE OS
	  logs and print to kernel dmesg buffer.
	  Say N if unsure.

config NEBULA_VTEE_LOG_DEV_MAJOR
	int "Nebula log character device major number"
	depends on NEBULA_VTEE_LOG
	default 0
	help
	  This number will be use as the major number in registering
	  chrdev if it's NOT 0. If it's 0, the major number would be
	  chosen dynamically. Pick an valid number if it conflicts
	  with other legacy drivers.

choice
	prompt "Platform flavor"
	default NEBULA_HAL_GENERIC
	help
	  It presents a selection of mutually exclusive options to the user,
	  typically representing different hardware platform support within
	  the Nebula system.
	  The default option is NEBULA_HAL_GENERIC.

config NEBULA_HAL_GENERIC
	bool "GENERIC"
	help
	  Generic HAL implementation.
	  It enables the inclusion of a generic Hardware Abstraction Layer (HAL)
	  implementation within the Nebula system.
	  This option, when selected, provides a standard interface between the
	  operating system and the hardware of the computer system.

config NEBULA_HAL_MEDIATEK
	bool "Mediatek"
	help
	  Supporting for Mediatek platform.
	  It is designed to enable support for the Mediatek platform within the
	  Nebula system's Hardware Abstraction Layer (HAL).
	  This option, when selected, provides a Mediatek interface between the
	  operating system and the hardware of the computer system.

endchoice

endmenu
